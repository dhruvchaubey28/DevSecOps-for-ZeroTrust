name: Traditional DevOps Pipeline

on:
  push:
    branches: [ "main" ]

# Fix: Proper top-level permissions (CKV2_GHA_1)
permissions:
  contents: read

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    # Job-level permissions
    permissions:
      contents: read
      packages: write
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4  # Updated to v4

    - name: Build Docker image
      run: |
        docker build -t traditional-app ./app
        echo "Image built successfully - NO SECURITY SCANS"

    - name: Deploy to Registry
      run: |
        echo "Would deploy to registry here"
        echo "No security checks performed"
        
    - name: Fake Deploy
      run: |
        echo "🚀 Application deployed successfully!"
        echo "⚠️  No security validation performed"
        echo "📊 Performance: Fast ⚡"
        echo "🔒 Security: Unknown ❓"